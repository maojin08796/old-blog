<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>以太网交换基础和VLAN原理配置 | 樂乐の博客</title><meta name="keywords" content="eNSP"><meta name="author" content="樂乐"><meta name="copyright" content="樂乐"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="以太网交换基础和VLAN原理配置"><meta name="application-name" content="以太网交换基础和VLAN原理配置"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="以太网交换基础和VLAN原理配置"><meta property="og:url" content="http://maojin08796.github.io/2024/12/17/12.17/index.html"><meta property="og:site_name" content="樂乐の博客"><meta property="og:description" content="eNSP"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png"><meta property="article:author" content="樂乐"><meta property="article:tag" content="樂乐"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png"><meta name="description" content="eNSP"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://maojin08796.github.io/2024/12/17/12.17/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: {"enable":true,"ck":"3ExLq5aiEcFjikZp","LingQueMonitorID":"3HPQVaoj9bs7V47f"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo-maojin.netlify.app/.netlify/functions/twikoo',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":180,"position":"top","messagePrev":"距离上次更新已经","messageNext":"天了，文章内容可能已经过时。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 樂乐","link":"链接: ","source":"来源: 樂乐の博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '樂乐の博客',
  title: '以太网交换基础和VLAN原理配置',
  postAI: '',
  pageFillDescription: '以太网交换基础, 前言, 目标, 目录, 以太网协议, 以太网协议概述, 冲突域, 广播域, 以太网卡, 以太网帧格式, Ethernet_II格式, IEEE 802.3格式, MAC地址, 什么是MAC地址, MAC地址表示, MAC地址构成及分类, 以太网帧类型, 单播以太帧, 广播以太帧, 组播以太帧, 以太网交换机, 以太网二层交换机, 交换机的工作原理, MAC地址表, 交换机的3种数据帧处理行为, 交换机的MAC地址学习, 同网段数据通信全过程, 场景描述, 数据封装过程, 通信过程, 思考题, 本章总结, VLAN原理与配置, 前言, 目标, 目录, 什么是VLAN, 传统以太网的问题, 虚拟局域网 (VLAN), VLAN的基本原理, 如何实现VLAN, VLAN标签 (VLAN Tag), VLAN数据帧结构, VLAN的划分方式, 基于接口的VLAN划分, 基于MAC地址的VLAN划分, 以太网二层接口类型, Access接口, Trunk接口, Hybrid接口, VLAN的规划, VLAN分配原则, VLAN分配技巧, VLAN的应用场景, 基于接口的VLAN划分, 基于MAC的VLAN划分, VLAN的基础配置命令, 创建VLAN, Access接口的基础配置, Trunk接口的基础配置, Hybrid接口的基础配置, 案例, 案例1：基于接口划分VLAN, 配置步骤：, 案例2：基于Hybrid接口划分VLAN, 配置步骤：, 案例：基于MAC地址划分VLAN, 配置步骤：, 思考题, 本章总结以太网交换基础前言在网络中传输数据时需要遵循一些标准以太网协议定义了数据帧在以太网上的传输标准了解以太网协议是充分理解数据链路层通信的基础以太网交换机是实现数据链路层通信的主要设备了解以太网交换机的工作原理也是十分必要的在本课程中将介绍以太网协议的相关概念地址的类型二层交换机的工作流程以及二层交换机的工作原理目标学完本课程后您将能够描述以太网的基本概念区分地址的类型描述二层交换机的工作流程描述地址表的构成与形成过程目录以太网协议介绍以太网帧介绍以太网交换机介绍同网段数据通信全过程以太网协议以太网协议概述以太网是当今现有局域网采用的最通用的通信协议标准该标准定义了在局域网中采用的电缆类型和信号处理方法以太网是建立在载波监听多路访问冲突检测机制上的广播型网络冲突域冲突域是指连接在同一共享介质上的所有节点的集合冲突域内所有节点竞争同一带宽一个节点发出的报文无论是单播组播广播其余节点都可以收到广播域广播报文所能到达的整个访问范围称为二层广播域简称广播域同一广播域内的主机都能收到广播报文以太网卡网络接口卡也称为网卡是计算机交换机路由器等网络设备与外部网络世界相连的关键部件每个网卡都有一个或多个网口每个网口都有一块网卡与之对应以太网帧格式以太网技术所使用的帧称为以太网帧或简称以太帧以太帧的格式有两个标准格式和格式格式目的地址源地址以太网帧类型数据帧校验序列格式目的地址源地址长度数据帧校验序列地址什么是地址地址在网络中唯一标识一个网卡每个网卡在出厂时都有一个唯一的地址地址表示地址有地址通常采用十六进制表示如地址构成及分类厂商代码由分配地址分类单播地址组播地址广播地址以太网帧类型单播以太帧目的地址为单播地址的帧广播以太帧目的地址为广播地址的帧组播以太帧目的地址为组播地址的帧以太网交换机以太网二层交换机以太网二层交换机转发数据的端口都是以太网口只能够针对数据的二层头部以太网数据帧头中的地址进行寻址并转发数据交换机的工作原理学习阶段交换机收到数据帧后学习帧的源地址查询阶段在地址表中查询该帧的目的地址转发阶段根据查询结果将帧从对应的端口转发出去地址表每台交换机中都有一个地址表存放了地址与交换机端口编号之间的映射关系交换机的种数据帧处理行为泛洪当交换机在地址表中查不到目的地址时对数据帧执行泛洪操作即向所有端口转发该帧转发当交换机在地址表中查到目的地址并且对应的端口编号不是数据帧进入交换机的端口编号时对数据帧执行转发操作丢弃当交换机在地址表中查到目的地址但对应的端口编号是数据帧进入交换机的端口编号时对数据帧执行丢弃操作交换机的地址学习交换机在收到数据帧后会学习帧的源地址并创建对应的地址表项与接收口关联同网段数据通信全过程场景描述任务主机想要访问主机初始化状态主机仅知道本机地址和地址假设已获取对端地址交换机刚上电初始化状态数据封装过程主机需要封装数据帧包括源地址和目的地址通信过程泛洪数据帧主机发送请求交换机在地址表中查不到目的地址执行泛洪操作学习地址交换机学习请求的源地址并创建对应的地址表项目标主机回复主机收到请求后回复应答包含自己的地址交换机更新地址表交换机学习应答的源地址并更新地址表数据通信主机根据获得的地址封装数据帧并通过交换机转发给主机思考题二层以太网交换机根据端口所接收到报文的源地址生成地址表一台交换机有个端口一个单播帧从某一端口进入了该交换机但交换机在地址表中查不到关于该帧的目的地址表项那么交换机对该帧进行的转发操作是泛洪本章总结在本章节中介绍了以太网协议的基本概况并介绍了以太网帧格式和地址还介绍了二层交换机的工作原理最后在基于交换机的工作原理的基础上回顾了同网段数据通信全过程原理与配置前言以太网是一种基于的数据网络通信技术其特征是共享通信介质当主机数目较多时会导致安全隐患广播泛滥性能显著下降甚至造成网络不可用在这种情况下出现了技术解决以上问题目标学完本课程后您将能够了解技术的产生背景识别数据所属的掌握不同的划分方式描述网络中数据的通信过程掌握的基本配置目录什么是的基本原理的应用的配置示例什么是传统以太网的问题在典型交换网络中当某台主机发送一个广播帧或未知单播帧时该数据帧会被泛洪甚至传递到整个广播域广播域越大产生的网络安全问题垃圾流量问题就越严重虚拟局域网可以隔离广播域特点是不受地域限制同一内的设备才能直接进行二层通信的基本原理如何实现在交换网络中为了实现需要识别划分和处理数据帧标签协议规定在以太网数据帧中加入个字节的标签用于标识信息数据帧结构目的地址源地址类型的划分方式基于接口的划分根据交换机的接口来划分网络管理员预先给交换机的每个接口配置不同的将该接口划入对应的基于地址的划分根据数据帧的源地址来划分网络管理员预先配置地址和映射关系表以太网二层接口类型接口常用于连接用户服务器等终端设备只能加入一个接收帧时打上接口的发送帧时若与相同则剥离否则丢弃接口允许多个的数据帧通过通过区分常用于交换机之间的互联接收帧时打上且在允许列表中发送帧时根据是否在允许列表中决定是否剥离接口与接口类似但用户可以灵活指定发送某个的数据帧时是否携带的规划分配原则按业务规划语音视频数据等按部门规划工程部市场部财经部等按应用规划服务器办公教室等分配技巧的分配在有效范围内可以随意选取但为了提高连续性可以采用和子网关联的方式进行分配的应用场景基于接口的划分应用场景多家公司共用网络资源各公司分别连接到一台二层交换机的不同接口划分将每个公司所连接的接口划分到不同的实现业务数据的隔离基于的划分应用场景某个公司的网络中要求只有本部门员工的主机才可以访问特定网络资源划分配置基于地址划分保证非本部门员工不能访问网络资源的基础配置命令创建接口的基础配置接口的基础配置接口的基础配置案例案例基于接口划分组网需求业务相同用户之间可以互相访问业务不同用户不能直接访问配置步骤创建配置接口和接口案例基于接口划分组网需求不同部门的用户不能直接访问但都可以直接访问公司服务器配置步骤创建配置接口案例基于地址划分组网需求只有本部门员工的主机才可以访问公司网络配置步骤创建关联地址和使能功能加入思考题多选下列关于的描述中错误的是技术可以将一个规模较大的冲突域隔离成若干个规模较小的冲突域技术可以将一个规模较大的二层广播域隔离成若干个规模较小的二层广播域位于不同的计算机之间无法进行通信位于同一中的计算机之间可以进行二层通信如果一个接口的是且端口下配置那么和的流量可以通过该接口进行传输本章总结本章节主要介绍了虚拟局域网的相关技术知识包括的作用标识及划分数据交互实际规划和应用以及基本配置通过技术可以将物理的局域网划分成多个广播域实现同一内的网络设备可以直接进行二层通信不同内的设备不可以直接进行二层通信',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-12-17 19:52:46',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 8 || hour >= 22
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/font.css"><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">樂乐の博客</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=8335997312&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/cinemas/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追剧页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/wish/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fanchuan"></use></svg><span> 心愿池</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todo/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bijiben"></use></svg><span> 清单</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Anzhiyu%E4%B8%BB%E9%A2%98/" style="font-size: 1.05rem;">Anzhiyu主题<sup>1</sup></a><a href="/tags/ArchLinux/" style="font-size: 1.05rem;">ArchLinux<sup>1</sup></a><a href="/tags/Butterfly/" style="font-size: 1.05rem;">Butterfly<sup>1</sup></a><a href="/tags/Butterfly%E9%AD%94%E6%94%B9/" style="font-size: 1.05rem;">Butterfly魔改<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>2</sup></a><a href="/tags/MathJax/" style="font-size: 1.05rem;">MathJax<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>1</sup></a><a href="/tags/eNSP/" style="font-size: 1.05rem;">eNSP<sup>20</sup></a><a href="/tags/%E5%A4%A7%E5%AD%A6/" style="font-size: 1.05rem;">大学<sup>3</sup></a><a href="/tags/%E6%97%A5%E5%B8%B8/" style="font-size: 1.05rem;">日常<sup>1</sup></a><a href="/tags/%E6%A8%82%E8%B0%B1/" style="font-size: 1.05rem;">樂谱<sup>9</sup></a><a href="/tags/%E7%A7%91%E7%9B%AE%E4%B8%89/" style="font-size: 1.05rem;">科目三<sup>1</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F/" style="font-size: 1.05rem;">系统<sup>1</sup></a><a href="/tags/%E7%BB%83%E8%BD%A6/" style="font-size: 1.05rem;">练车<sup>1</sup></a><a href="/tags/%E8%8A%82%E6%B0%94/" style="font-size: 1.05rem;">节气<sup>1</sup></a><a href="/tags/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/" style="font-size: 1.05rem;">课堂笔记<sup>1</sup></a><a href="/tags/%E9%92%A2%E7%90%B4%F0%9F%8E%B9/" style="font-size: 1.05rem;">钢琴🎹<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">13</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/eNSP/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>eNSP</span></a></span></div></div><h1 class="post-title" itemprop="name headline">以太网交换基础和VLAN原理配置</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-12-17T08:12:22.000Z" title="发表于 2024-12-17 16:12:22">2024-12-17</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-12-17T11:52:46.000Z" title="更新于 2024-12-17 19:52:46">2024-12-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">3.1k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>10分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="以太网交换基础和VLAN原理配置"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为乐都"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>乐都</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://s2.loli.net/2023/06/26/3rP6MoJsianfXLI.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://maojin08796.github.io/2024/12/17/12.17/"><header><a href="/tags/eNSP/" tabindex="-1" itemprop="url">eNSP</a><h1 id="CrawlerTitle" itemprop="name headline">以太网交换基础和VLAN原理配置</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">樂乐</span><time itemprop="dateCreated datePublished" datetime="2024-12-17T08:12:22.000Z" title="发表于 2024-12-17 16:12:22">2024-12-17</time><time itemprop="dateCreated datePublished" datetime="2024-12-17T11:52:46.000Z" title="更新于 2024-12-17 19:52:46">2024-12-17</time></header><h1 id="以太网交换基础"><a href="#以太网交换基础" class="headerlink" title="以太网交换基础"></a><strong>以太网交换基础</strong></h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p> 在网络中传输数据时需要遵循一些标准，以太网协议定义了数据帧在以太网上的传输标准，了解以太网协议是充分理解数据链路层通信 的基础。 以太网交换机是实现数据链路层通信的主要设备，了解以太网交换机的工作原理也是十分必要的。 在本课程中，将介绍以太网协议的相关概念、MAC地址的类型、二层交换机的工作流程以及二层交换机的工作原理。 </p>
<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a><strong>目标</strong></h2><p> 学完本课程后，您将能够：</p>
<ul>
<li>描述以太网的基本概念</li>
<li>区分MAC地址的类型</li>
<li>描述二层交换机的工作流程</li>
<li>描述MAC地址表的构成与形成过程</li>
</ul>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a><strong>目录</strong></h2><ol>
<li>以太网协议介绍</li>
<li>以太网帧介绍</li>
<li>以太网交换机介绍</li>
<li>同网段数据通信全过程</li>
</ol>
<h2 id="以太网协议"><a href="#以太网协议" class="headerlink" title="以太网协议"></a><strong>以太网协议</strong></h2><h3 id="以太网协议概述"><a href="#以太网协议概述" class="headerlink" title="以太网协议概述"></a><strong>以太网协议概述</strong></h3><ul>
<li>以太网是当今现有局域网（LAN）采用的最通用的通信协议标准。 </li>
<li>该标准定义了在局域网中采用的电缆类型和信号处理方法。 </li>
<li>以太网是建立在CSMA&#x2F;CD（载波监听多路访问&#x2F;冲突检测）机制上的广播型网络。</li>
</ul>
<h3 id="冲突域"><a href="#冲突域" class="headerlink" title="冲突域"></a><strong>冲突域</strong></h3><ul>
<li>冲突域是指连接在同一共享介质上的所有节点的集合。 </li>
<li>冲突域内所有节点竞争同一带宽，一个节点发出的报文（无论是单播、组播、广播），其余节点都可以收到。</li>
</ul>
<h3 id="广播域"><a href="#广播域" class="headerlink" title="广播域"></a><strong>广播域</strong></h3><ul>
<li>广播报文所能到达的整个访问范围称为二层广播域，简称广播域。 </li>
<li>同一广播域内的主机都能收到广播报文。</li>
</ul>
<h2 id="以太网卡"><a href="#以太网卡" class="headerlink" title="以太网卡"></a><strong>以太网卡</strong></h2><ul>
<li>网络接口卡（NIC）也称为“网卡”，是计算机、交换机、路由器等网络设备与外部网络世界相连的关键部件。 </li>
<li>每个网卡都有一个或多个网口，每个网口都有一块网卡与之对应。</li>
</ul>
<h2 id="以太网帧格式"><a href="#以太网帧格式" class="headerlink" title="以太网帧格式"></a><strong>以太网帧格式</strong></h2><p> 以太网技术所使用的帧称为以太网帧（Ethernet Frame），或简称以太帧。 以太帧的格式有两个标准：Ethernet_II格式和IEEE 802.3格式。 </p>
<h3 id="Ethernet-II格式"><a href="#Ethernet-II格式" class="headerlink" title="Ethernet_II格式"></a><strong>Ethernet_II格式</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">| 6B目的MAC地址 | 6B源MAC地址 | 2B以太网帧类型 | 46-1500 B数据 | 4B帧校验序列 |</span><br></pre></td></tr></table></figure>
<h3 id="IEEE-802-3格式"><a href="#IEEE-802-3格式" class="headerlink" title="IEEE 802.3格式"></a><strong>IEEE 802.3格式</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">| 6B目的MAC地址 | 6B源MAC地址 | 2B长度 | 数据 | 4B帧校验序列 |</span><br></pre></td></tr></table></figure>

<h3 id="MAC地址"><a href="#MAC地址" class="headerlink" title="MAC地址"></a><strong>MAC地址</strong></h3><h4 id="什么是MAC地址"><a href="#什么是MAC地址" class="headerlink" title="什么是MAC地址"></a><strong>什么是MAC地址</strong></h4><p>  • MAC（Medium Access Control）地址在网络中唯一标识一个网卡。</p>
<p>  • 每个网卡在出厂时都有一个唯一的MAC地址。</p>
<h4 id="MAC地址表示"><a href="#MAC地址表示" class="headerlink" title="MAC地址表示"></a><strong>MAC地址表示</strong></h4><p>  • MAC地址有48 bit，6 Byte。</p>
<p>  • MAC地址通常采用“十六进制”+“-”表示，如: 00-1E-10-DD-DD-02 。</p>
<h4 id="MAC地址构成及分类"><a href="#MAC地址构成及分类" class="headerlink" title="MAC地址构成及分类"></a><strong>MAC地址构成及分类</strong></h4><p>  • OUI（Organizationally Unique Identifier）：厂商代码，由IEEE分配，3 Byte，24 bit。</p>
<p>  • MAC地址分类：单播MAC地址、组播MAC地址、广播MAC地址。</p>
<h3 id="以太网帧类型"><a href="#以太网帧类型" class="headerlink" title="以太网帧类型"></a><strong>以太网帧类型</strong></h3><h4 id="单播以太帧"><a href="#单播以太帧" class="headerlink" title="单播以太帧"></a><strong>单播以太帧</strong></h4><p>  • 目的MAC地址为单播MAC地址的帧。</p>
<h4 id="广播以太帧"><a href="#广播以太帧" class="headerlink" title="广播以太帧"></a><strong>广播以太帧</strong></h4><p>  • 目的MAC地址为广播MAC地址（FF-FF-FF-FF-FF-FF）的帧。</p>
<h4 id="组播以太帧"><a href="#组播以太帧" class="headerlink" title="组播以太帧"></a><strong>组播以太帧</strong></h4><p>  • 目的MAC地址为组播MAC地址的帧。</p>
<h3 id="以太网交换机"><a href="#以太网交换机" class="headerlink" title="以太网交换机"></a><strong>以太网交换机</strong></h3><h4 id="以太网二层交换机"><a href="#以太网二层交换机" class="headerlink" title="以太网二层交换机"></a><strong>以太网二层交换机</strong></h4><p>  • 以太网二层交换机转发数据的端口都是以太网口。</p>
<p>  • 只能够针对数据的二层头部（以太网数据帧头）中的MAC地址进行寻址并转发数据。</p>
<h4 id="交换机的工作原理"><a href="#交换机的工作原理" class="headerlink" title="交换机的工作原理"></a><strong>交换机的工作原理</strong></h4><ol>
<li><p>学习阶段：交换机收到数据帧后，学习帧的源MAC地址。</p>
</li>
<li><p>查询阶段：在MAC地址表中查询该帧的目的MAC地址。</p>
</li>
<li><p>转发阶段：根据查询结果，将帧从对应的端口转发出去。</p>
</li>
</ol>
<h4 id="MAC地址表"><a href="#MAC地址表" class="headerlink" title="MAC地址表"></a><strong>MAC地址表</strong></h4><p>  • 每台交换机中都有一个MAC地址表，存放了MAC地址与交换机端口编号之间的映射关系。</p>
<h4 id="交换机的3种数据帧处理行为"><a href="#交换机的3种数据帧处理行为" class="headerlink" title="交换机的3种数据帧处理行为"></a><strong>交换机的3种数据帧处理行为</strong></h4><ol>
<li><p>泛洪（Flooding）：当交换机在MAC地址表中查不到目的MAC地址时，对数据帧执行泛洪操作， 即向所有端口转发该帧。</p>
</li>
<li><p>转发（Forwarding）：当交换机在MAC地址表中查到目的MAC地址，并且对应的端口编号不是数据帧进入交换机的 端口编号时，对数据帧执行转发操作。</p>
</li>
<li><p>丢弃（Discarding）：当交换机在MAC地址表中查到目的MAC地址，但对应的端口编号是数据帧进入交换 机的端口编号时，对数据帧执行丢弃操作。</p>
</li>
</ol>
<h4 id="交换机的MAC地址学习"><a href="#交换机的MAC地址学习" class="headerlink" title="交换机的MAC地址学习"></a><strong>交换机的MAC地址学习</strong></h4><p>  • 交换机在收到数据帧后，会学习帧的源MAC地址，并创建对应的MAC地址表项，与接收口关联。</p>
<h3 id="同网段数据通信全过程"><a href="#同网段数据通信全过程" class="headerlink" title="同网段数据通信全过程"></a><strong>同网段数据通信全过程</strong></h3><h4 id="场景描述"><a href="#场景描述" class="headerlink" title="场景描述"></a><strong>场景描述</strong></h4><p>  • 任务：主机1想要访问主机2。</p>
<p>  • 初始化状态：主机仅知道本机IP地址和MAC地址（假设已获取对端IP地址），交换机刚上电，初始化状态 。</p>
<h4 id="数据封装过程"><a href="#数据封装过程" class="headerlink" title="数据封装过程"></a><strong>数据封装过程</strong></h4><p>  • 主机1需要封装数据帧，包括源MAC地址和目的MAC地址。</p>
<h4 id="通信过程"><a href="#通信过程" class="headerlink" title="通信过程"></a><strong>通信过程</strong></h4><ol>
<li><p>泛洪数据帧：主机1发送ARP请求，交换机在MAC地址表中查不到目的MAC地址，执行泛洪操作。</p>
</li>
<li><p>学习MAC地址：交换机学习ARP请求的源MAC地址，并创建对应的MAC地址表项。</p>
</li>
<li><p>目标主机回复：主机2收到ARP请求后回复ARP应答，包含自己的MAC地址。</p>
</li>
<li><p>交换机更新MAC地址表：交换机学习ARP应答的源MAC地址，并更新MAC地址表。</p>
</li>
<li><p>数据通信：主机1根据获得的MAC地址封装数据帧，并通过交换机转发给主机2。</p>
</li>
</ol>
<h3 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a><strong>思考题</strong></h3><ol>
<li><p>二层以太网交换机根据端口所接收到报文的（源 MAC 地址）生成 MAC 地址表。</p>
</li>
<li><p>一台交换机有8个端口，一个单播帧从某一端口进入了该交换机，但交换机在MAC地址表中查不到关于该 帧的目的MAC地址表项，那么交换机对该帧进行的转发操作是（泛洪）。</p>
</li>
</ol>
<h2 id="本章总结"><a href="#本章总结" class="headerlink" title="本章总结"></a><strong>本章总结</strong></h2><p>在本章节中，介绍了以太网协议的基本概况，并介绍了以太网帧格式和MAC地址，还介绍了二层交换机的工作原理，最后在基于交换机的工作原理的基础上 ，回顾了同网段数据通信全过程。</p>
<h1 id="VLAN原理与配置"><a href="#VLAN原理与配置" class="headerlink" title="VLAN原理与配置"></a>VLAN原理与配置</h1><h2 id="前言-1"><a href="#前言-1" class="headerlink" title="前言"></a><strong>前言</strong></h2><p>以太网是一种基于CSMA&#x2F;CD的数据网络通信技术，其特征是共享通信介质。当主机数目较多时会导致安全隐患、广播泛滥、性能显著下降甚至造成网络不可用。在这种情况下出现了VLAN (Virtual Local Area Network)技术解决以上问题。</p>
<h2 id="目标-1"><a href="#目标-1" class="headerlink" title="目标"></a><strong>目标</strong></h2><p>学完本课程后，您将能够：</p>
<p>  • 了解VLAN技术的产生背景</p>
<p>  • 识别数据所属的VLAN</p>
<p>  • 掌握不同的VLAN划分方式</p>
<p>  • 描述网络中VLAN数据的通信过程</p>
<p>  • 掌握VLAN的基本配置</p>
<h2 id="目录-1"><a href="#目录-1" class="headerlink" title="目录"></a><strong>目录</strong></h2><ol>
<li><p>什么是VLAN</p>
</li>
<li><p>VLAN的基本原理</p>
</li>
<li><p>VLAN的应用</p>
</li>
<li><p>VLAN的配置示例</p>
</li>
</ol>
<h2 id="什么是VLAN"><a href="#什么是VLAN" class="headerlink" title="什么是VLAN"></a><strong>什么是VLAN</strong></h2><h3 id="传统以太网的问题"><a href="#传统以太网的问题" class="headerlink" title="传统以太网的问题"></a><strong>传统以太网的问题</strong></h3><p>在典型交换网络中，当某台主机发送一个广播帧或未知单播帧时，该数据帧会被泛洪，甚至传递到整个广播域。广播域越大，产生的网络安全问题、垃圾流量问题就越严重。</p>
<h3 id="虚拟局域网-VLAN"><a href="#虚拟局域网-VLAN" class="headerlink" title="虚拟局域网 (VLAN)"></a><strong>虚拟局域网 (VLAN)</strong></h3><p>VLAN可以隔离广播域，特点是不受地域限制。同一VLAN内的设备才能直接进行二层通信。</p>
<h3 id="VLAN的基本原理"><a href="#VLAN的基本原理" class="headerlink" title="VLAN的基本原理"></a><strong>VLAN的基本原理</strong></h3><h3 id="如何实现VLAN"><a href="#如何实现VLAN" class="headerlink" title="如何实现VLAN"></a><strong>如何实现VLAN</strong></h3><p>在交换网络中，为了实现VLAN，需要识别、划分和处理VLAN数据帧。</p>
<h3 id="VLAN标签-VLAN-Tag"><a href="#VLAN标签-VLAN-Tag" class="headerlink" title="VLAN标签 (VLAN Tag)"></a><strong>VLAN标签 (VLAN Tag)</strong></h3><p>IEEE 802.1Q协议规定，在以太网数据帧中加入4个字节的VLAN标签（Tag），用于标识VLAN信息。</p>
<h3 id="VLAN数据帧结构"><a href="#VLAN数据帧结构" class="headerlink" title="VLAN数据帧结构"></a><strong>VLAN数据帧结构</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TPID (0x8100) | PRI (3bit) | CFI (1bit) | VLAN ID (12bit) | 目的MAC地址 | 源MAC地址 | 类型 | Data | FCS</span><br></pre></td></tr></table></figure>

<h3 id="VLAN的划分方式"><a href="#VLAN的划分方式" class="headerlink" title="VLAN的划分方式"></a><strong>VLAN的划分方式</strong></h3><h3 id="基于接口的VLAN划分"><a href="#基于接口的VLAN划分" class="headerlink" title="基于接口的VLAN划分"></a><strong>基于接口的VLAN划分</strong></h3><p>根据交换机的接口来划分VLAN。网络管理员预先给交换机的每个接口配置不同的PVID（Port VLAN ID），将该接口划入PVID对应的VLAN。</p>
<h3 id="基于MAC地址的VLAN划分"><a href="#基于MAC地址的VLAN划分" class="headerlink" title="基于MAC地址的VLAN划分"></a><strong>基于MAC地址的VLAN划分</strong></h3><p>根据数据帧的源MAC地址来划分VLAN。网络管理员预先配置MAC地址和VLAN ID映射关系表。</p>
<h3 id="以太网二层接口类型"><a href="#以太网二层接口类型" class="headerlink" title="以太网二层接口类型"></a><strong>以太网二层接口类型</strong></h3><h4 id="Access接口"><a href="#Access接口" class="headerlink" title="Access接口"></a><strong>Access接口</strong></h4><p>  • 常用于连接用户PC、服务器等终端设备。</p>
<p>  • 只能加入一个VLAN。</p>
<p>  • 接收Untagged帧时，打上接口的PVID Tag。</p>
<p>  • 发送帧时，若VLAN ID与PVID相同则剥离Tag，否则丢弃。</p>
<h4 id="Trunk接口"><a href="#Trunk接口" class="headerlink" title="Trunk接口"></a><strong>Trunk接口</strong></h4><p>  • 允许多个VLAN的数据帧通过，通过802.1Q Tag区分。</p>
<p>  • 常用于交换机之间的互联。</p>
<p>  • 接收Untagged帧时，打上PVID Tag（且PVID在允许列表中）。</p>
<p>  • 发送帧时，根据VLAN ID是否在允许列表中决定是否剥离Tag。</p>
<h4 id="Hybrid接口"><a href="#Hybrid接口" class="headerlink" title="Hybrid接口"></a><strong>Hybrid接口</strong></h4><p>  • 与Trunk接口类似，但用户可以灵活指定发送某个VLAN的数据帧时是否携带Tag。</p>
<h3 id="VLAN的规划"><a href="#VLAN的规划" class="headerlink" title="VLAN的规划"></a><strong>VLAN的规划</strong></h3><h3 id="VLAN分配原则"><a href="#VLAN分配原则" class="headerlink" title="VLAN分配原则"></a><strong>VLAN分配原则</strong></h3><p>  • 按业务规划：语音、视频、数据等。</p>
<p>  • 按部门规划：工程部、市场部、财经部等。</p>
<p>  • 按应用规划：服务器、办公、教室等。</p>
<h3 id="VLAN分配技巧"><a href="#VLAN分配技巧" class="headerlink" title="VLAN分配技巧"></a><strong>VLAN分配技巧</strong></h3><p>VLAN ID的分配在有效范围内可以随意选取，但为了提高连续性，可以采用VLAN ID和子网关联的方式进行分配。</p>
<h3 id="VLAN的应用场景"><a href="#VLAN的应用场景" class="headerlink" title="VLAN的应用场景"></a><strong>VLAN的应用场景</strong></h3><h3 id="基于接口的VLAN划分-1"><a href="#基于接口的VLAN划分-1" class="headerlink" title="基于接口的VLAN划分"></a><strong>基于接口的VLAN划分</strong></h3><p>应用场景：多家公司共用网络资源，各公司分别连接到一台二层交换机的不同接口。</p>
<p>VLAN划分：将每个公司所连接的接口划分到不同的VLAN，实现业务数据的隔离。</p>
<h3 id="基于MAC的VLAN划分"><a href="#基于MAC的VLAN划分" class="headerlink" title="基于MAC的VLAN划分"></a><strong>基于MAC的VLAN划分</strong></h3><p>应用场景：某个公司的网络中，要求只有本部门员工的主机才可以访问特定网络资源。</p>
<p>VLAN划分：配置基于MAC地址划分VLAN，保证非本部门员工不能访问网络资源。</p>
<h3 id="VLAN的基础配置命令"><a href="#VLAN的基础配置命令" class="headerlink" title="VLAN的基础配置命令"></a><strong>VLAN的基础配置命令</strong></h3><h4 id="创建VLAN"><a href="#创建VLAN" class="headerlink" title="创建VLAN"></a><strong>创建VLAN</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> [Huawei] vlan vlan-id</span><br><span class="line">[Huawei] vlan batch &#123; vlan-id1 [ to vlan-id2 ] &#125;</span><br></pre></td></tr></table></figure>

<h4 id="Access接口的基础配置"><a href="#Access接口的基础配置" class="headerlink" title="Access接口的基础配置"></a><strong>Access接口的基础配置</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> [Huawei-GigabitEthernet0/0/1] port link-type access</span><br><span class="line">[Huawei-GigabitEthernet0/0/1] port default vlan vlan-id</span><br></pre></td></tr></table></figure>

<h4 id="Trunk接口的基础配置"><a href="#Trunk接口的基础配置" class="headerlink" title="Trunk接口的基础配置"></a><strong>Trunk接口的基础配置</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> [Huawei-GigabitEthernet0/0/1] port link-type trunk</span><br><span class="line">[Huawei-GigabitEthernet0/0/1] port trunk allow-pass vlan &#123; &#123; vlan-id1 [ to vlan-id2 ] &#125; | all &#125;</span><br><span class="line">[Huawei-GigabitEthernet0/0/1] port trunk pvid vlan vlan-id</span><br></pre></td></tr></table></figure>

<h4 id="Hybrid接口的基础配置"><a href="#Hybrid接口的基础配置" class="headerlink" title="Hybrid接口的基础配置"></a><strong>Hybrid接口的基础配置</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> [Huawei-GigabitEthernet0/0/1] port link-type hybrid</span><br><span class="line">[Huawei-GigabitEthernet0/0/1] port hybrid untagged vlan &#123; &#123; vlan-id1 [ to vlan-id2 ] &#125; | all &#125;</span><br><span class="line">[Huawei-GigabitEthernet0/0/1] port hybrid pvid vlan vlan-id</span><br><span class="line">[Huawei-GigabitEthernet0/0/1] port hybrid tagged vlan &#123; &#123; vlan-id1 [ to vlan-id2 ] &#125; | all &#125;</span><br></pre></td></tr></table></figure>

<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a><strong>案例</strong></h3><h3 id="案例1：基于接口划分VLAN"><a href="#案例1：基于接口划分VLAN" class="headerlink" title="案例1：基于接口划分VLAN"></a>案例1：<strong>基于接口划分VLAN</strong></h3><p>组网需求：业务相同用户之间可以互相访问，业务不同用户不能直接访问。</p>
<h3 id="配置步骤："><a href="#配置步骤：" class="headerlink" title="配置步骤："></a><strong>配置步骤</strong>：</h3><ol>
<li><p>创建VLAN。</p>
</li>
<li><p>配置Access接口和Trunk接口。</p>
</li>
</ol>
<h3 id="案例2：基于Hybrid接口划分VLAN"><a href="#案例2：基于Hybrid接口划分VLAN" class="headerlink" title="案例2：基于Hybrid接口划分VLAN"></a>案例2：<strong>基于Hybrid接口划分VLAN</strong></h3><p>组网需求：不同部门的用户不能直接访问，但都可以直接访问公司服务器。</p>
<h3 id="配置步骤：-1"><a href="#配置步骤：-1" class="headerlink" title="配置步骤："></a><strong>配置步骤</strong>：</h3><ol>
<li><p>创建VLAN。</p>
</li>
<li><p>配置Hybrid接口。</p>
</li>
</ol>
<h3 id="案例：基于MAC地址划分VLAN"><a href="#案例：基于MAC地址划分VLAN" class="headerlink" title="案例：基于MAC地址划分VLAN"></a>案例：<strong>基于MAC地址划分VLAN</strong></h3><p>组网需求：只有本部门员工的主机才可以访问公司网络。</p>
<h3 id="配置步骤：-2"><a href="#配置步骤：-2" class="headerlink" title="配置步骤："></a><strong>配置步骤</strong>：</h3><ol>
<li><p>创建VLAN。</p>
</li>
<li><p>关联MAC地址和VLAN。</p>
</li>
<li><p>使能MAC VLAN功能。</p>
</li>
<li><p>加入VLAN。</p>
</li>
</ol>
<h3 id="思考题-1"><a href="#思考题-1" class="headerlink" title="思考题"></a><strong>思考题</strong></h3><p>(多选) 下列关于VLAN的描述中，错误的是？</p>
<p>  • VLAN技术可以将一个规模较大的冲突域隔离成若干个规模较小的冲突域</p>
<p>  • VLAN技术可以将一个规模较大的二层广播域隔离成若干个规模较小的二层广播域</p>
<p>  • 位于不同VLAN的计算机之间无法进行通信</p>
<p>  • 位于同一VLAN中的计算机之间可以进行二层通信</p>
<p>  • 如果一个Trunk接口的PVID是5，且端口下配置port trunk allow-pass vlan 2 3，那么VLAN 5和VLAN 2、3的流量可以通过该Trunk接口进行传输。</p>
<h3 id="本章总结-1"><a href="#本章总结-1" class="headerlink" title="本章总结"></a><strong>本章总结</strong></h3><p>本章节主要介绍了虚拟局域网(VLAN)的相关技术知识，包括VLAN的作用、标识及划分、数据交互、实际规划和应用，以及基本配置。通过VLAN技术，可以将物理的局域网划分成多个广播域，实现同一VLAN内的网络设备可以直接进行二层通信，不同VLAN内的设备不可以直接进行二层通信。</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/Wox4YqVQzy9RehX.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/Wox4YqVQzy9RehX.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">樂乐</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://maojin08796.github.io/2024/12/17/12.17/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://maojin08796.github.io/2024/12/17/12.17/')">以太网交换基础和VLAN原理配置</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div><div class="reward-link mode"><a class="reward-link-button" href="/wechat/"><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>运营模式与责任</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://maojin08796.github.io/2024/12/17/12.17/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=以太网交换基础和VLAN原理配置&amp;url=http://maojin08796.github.io/2024/12/17/12.17/&amp;pic=https://s2.loli.net/2023/06/26/3rP6MoJsianfXLI.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://maojin08796.github.io" target="_blank">樂乐の博客</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/eNSP/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>eNSP<span class="tagsPageCount">20</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/12/16/12.16/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">网络设备基础</div></div></a></div><div class="next-post pull-right"><a href="/2024/12/18/12.18/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">OSPF基础与路由计算</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2024/06/17/06.17/" title="617"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-06-17</div><div class="title">617</div></div></a></div><div><a href="/2024/06/18/06.18/" title="618"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-06-18</div><div class="title">618</div></div></a></div><div><a href="/2024/06/19/06.19/" title="619"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-06-19</div><div class="title">619</div></div></a></div><div><a href="/2024/06/20/06.20/" title="620"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-06-20</div><div class="title">620</div></div></a></div><div><a href="/2024/06/21/06.21/" title="621"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-06-21</div><div class="title">621</div></div></a></div><div><a href="/2024/07/08/07.08/" title="708"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-07-08</div><div class="title">708</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/Wox4YqVQzy9RehX.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about"><h1 class="author-info__name">樂乐</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/anzhiyu-c" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=lele0857@outlook.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="social-icon faa-parent animated-hover" href="/atom.xml" target="_blank" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/341232484" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="social-icon faa-parent animated-hover" href="tencent://Message/?Uin=2324033256&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" target="_blank" title="QQ"><i class="anzhiyufont anzhiyu-icon-qq"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">以太网交换基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87"><span class="toc-number">1.2.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95"><span class="toc-number">1.3.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.4.</span> <span class="toc-text">以太网协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">1.4.1.</span> <span class="toc-text">以太网协议概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%B2%E7%AA%81%E5%9F%9F"><span class="toc-number">1.4.2.</span> <span class="toc-text">冲突域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E5%9F%9F"><span class="toc-number">1.4.3.</span> <span class="toc-text">广播域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%8D%A1"><span class="toc-number">1.5.</span> <span class="toc-text">以太网卡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.6.</span> <span class="toc-text">以太网帧格式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Ethernet-II%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.6.1.</span> <span class="toc-text">Ethernet_II格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IEEE-802-3%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.6.2.</span> <span class="toc-text">IEEE 802.3格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MAC%E5%9C%B0%E5%9D%80"><span class="toc-number">1.6.3.</span> <span class="toc-text">MAC地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFMAC%E5%9C%B0%E5%9D%80"><span class="toc-number">1.6.3.1.</span> <span class="toc-text">什么是MAC地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MAC%E5%9C%B0%E5%9D%80%E8%A1%A8%E7%A4%BA"><span class="toc-number">1.6.3.2.</span> <span class="toc-text">MAC地址表示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MAC%E5%9C%B0%E5%9D%80%E6%9E%84%E6%88%90%E5%8F%8A%E5%88%86%E7%B1%BB"><span class="toc-number">1.6.3.3.</span> <span class="toc-text">MAC地址构成及分类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.6.4.</span> <span class="toc-text">以太网帧类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E6%92%AD%E4%BB%A5%E5%A4%AA%E5%B8%A7"><span class="toc-number">1.6.4.1.</span> <span class="toc-text">单播以太帧</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E4%BB%A5%E5%A4%AA%E5%B8%A7"><span class="toc-number">1.6.4.2.</span> <span class="toc-text">广播以太帧</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E6%92%AD%E4%BB%A5%E5%A4%AA%E5%B8%A7"><span class="toc-number">1.6.4.3.</span> <span class="toc-text">组播以太帧</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">1.6.5.</span> <span class="toc-text">以太网交换机</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%8C%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">1.6.5.1.</span> <span class="toc-text">以太网二层交换机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.6.5.2.</span> <span class="toc-text">交换机的工作原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MAC%E5%9C%B0%E5%9D%80%E8%A1%A8"><span class="toc-number">1.6.5.3.</span> <span class="toc-text">MAC地址表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%843%E7%A7%8D%E6%95%B0%E6%8D%AE%E5%B8%A7%E5%A4%84%E7%90%86%E8%A1%8C%E4%B8%BA"><span class="toc-number">1.6.5.4.</span> <span class="toc-text">交换机的3种数据帧处理行为</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84MAC%E5%9C%B0%E5%9D%80%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.6.5.5.</span> <span class="toc-text">交换机的MAC地址学习</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E7%BD%91%E6%AE%B5%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E5%85%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.6.6.</span> <span class="toc-text">同网段数据通信全过程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.6.6.1.</span> <span class="toc-text">场景描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%B0%81%E8%A3%85%E8%BF%87%E7%A8%8B"><span class="toc-number">1.6.6.2.</span> <span class="toc-text">数据封装过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B"><span class="toc-number">1.6.6.3.</span> <span class="toc-text">通信过程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%9D%E8%80%83%E9%A2%98"><span class="toc-number">1.6.7.</span> <span class="toc-text">思考题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E7%AB%A0%E6%80%BB%E7%BB%93"><span class="toc-number">1.7.</span> <span class="toc-text">本章总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VLAN%E5%8E%9F%E7%90%86%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">VLAN原理与配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80-1"><span class="toc-number">2.1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-1"><span class="toc-number">2.2.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95-1"><span class="toc-number">2.3.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFVLAN"><span class="toc-number">2.4.</span> <span class="toc-text">什么是VLAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.4.1.</span> <span class="toc-text">传统以太网的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91-VLAN"><span class="toc-number">2.4.2.</span> <span class="toc-text">虚拟局域网 (VLAN)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VLAN%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-number">2.4.3.</span> <span class="toc-text">VLAN的基本原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0VLAN"><span class="toc-number">2.4.4.</span> <span class="toc-text">如何实现VLAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VLAN%E6%A0%87%E7%AD%BE-VLAN-Tag"><span class="toc-number">2.4.5.</span> <span class="toc-text">VLAN标签 (VLAN Tag)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VLAN%E6%95%B0%E6%8D%AE%E5%B8%A7%E7%BB%93%E6%9E%84"><span class="toc-number">2.4.6.</span> <span class="toc-text">VLAN数据帧结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VLAN%E7%9A%84%E5%88%92%E5%88%86%E6%96%B9%E5%BC%8F"><span class="toc-number">2.4.7.</span> <span class="toc-text">VLAN的划分方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%8E%A5%E5%8F%A3%E7%9A%84VLAN%E5%88%92%E5%88%86"><span class="toc-number">2.4.8.</span> <span class="toc-text">基于接口的VLAN划分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EMAC%E5%9C%B0%E5%9D%80%E7%9A%84VLAN%E5%88%92%E5%88%86"><span class="toc-number">2.4.9.</span> <span class="toc-text">基于MAC地址的VLAN划分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%8C%E5%B1%82%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.4.10.</span> <span class="toc-text">以太网二层接口类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Access%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.4.10.1.</span> <span class="toc-text">Access接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Trunk%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.4.10.2.</span> <span class="toc-text">Trunk接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hybrid%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.4.10.3.</span> <span class="toc-text">Hybrid接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VLAN%E7%9A%84%E8%A7%84%E5%88%92"><span class="toc-number">2.4.11.</span> <span class="toc-text">VLAN的规划</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VLAN%E5%88%86%E9%85%8D%E5%8E%9F%E5%88%99"><span class="toc-number">2.4.12.</span> <span class="toc-text">VLAN分配原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VLAN%E5%88%86%E9%85%8D%E6%8A%80%E5%B7%A7"><span class="toc-number">2.4.13.</span> <span class="toc-text">VLAN分配技巧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VLAN%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">2.4.14.</span> <span class="toc-text">VLAN的应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%8E%A5%E5%8F%A3%E7%9A%84VLAN%E5%88%92%E5%88%86-1"><span class="toc-number">2.4.15.</span> <span class="toc-text">基于接口的VLAN划分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EMAC%E7%9A%84VLAN%E5%88%92%E5%88%86"><span class="toc-number">2.4.16.</span> <span class="toc-text">基于MAC的VLAN划分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VLAN%E7%9A%84%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4"><span class="toc-number">2.4.17.</span> <span class="toc-text">VLAN的基础配置命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAVLAN"><span class="toc-number">2.4.17.1.</span> <span class="toc-text">创建VLAN</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Access%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">2.4.17.2.</span> <span class="toc-text">Access接口的基础配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Trunk%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">2.4.17.3.</span> <span class="toc-text">Trunk接口的基础配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hybrid%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">2.4.17.4.</span> <span class="toc-text">Hybrid接口的基础配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">2.4.18.</span> <span class="toc-text">案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E5%9F%BA%E4%BA%8E%E6%8E%A5%E5%8F%A3%E5%88%92%E5%88%86VLAN"><span class="toc-number">2.4.19.</span> <span class="toc-text">案例1：基于接口划分VLAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">2.4.20.</span> <span class="toc-text">配置步骤：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A%E5%9F%BA%E4%BA%8EHybrid%E6%8E%A5%E5%8F%A3%E5%88%92%E5%88%86VLAN"><span class="toc-number">2.4.21.</span> <span class="toc-text">案例2：基于Hybrid接口划分VLAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4%EF%BC%9A-1"><span class="toc-number">2.4.22.</span> <span class="toc-text">配置步骤：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%9F%BA%E4%BA%8EMAC%E5%9C%B0%E5%9D%80%E5%88%92%E5%88%86VLAN"><span class="toc-number">2.4.23.</span> <span class="toc-text">案例：基于MAC地址划分VLAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4%EF%BC%9A-2"><span class="toc-number">2.4.24.</span> <span class="toc-text">配置步骤：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%9D%E8%80%83%E9%A2%98-1"><span class="toc-number">2.4.25.</span> <span class="toc-text">思考题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E7%AB%A0%E6%80%BB%E7%BB%93-1"><span class="toc-number">2.4.26.</span> <span class="toc-text">本章总结</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/12/24/12.24/" title="华为防火墙技术"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="华为防火墙技术"/></a><div class="content"><a class="title" href="/2024/12/24/12.24/" title="华为防火墙技术">华为防火墙技术</a><time datetime="2024-12-24T08:12:22.000Z" title="发表于 2024-12-24 16:12:22">2024-12-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/24/1224/" title="1224"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="1224"/></a><div class="content"><a class="title" href="/2024/12/24/1224/" title="1224">1224</a><time datetime="2024-12-24T08:12:22.000Z" title="发表于 2024-12-24 16:12:22">2024-12-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/23/12.23/" title="ACL原理与配置+网络地址转换"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ACL原理与配置+网络地址转换"/></a><div class="content"><a class="title" href="/2024/12/23/12.23/" title="ACL原理与配置+网络地址转换">ACL原理与配置+网络地址转换</a><time datetime="2024-12-23T08:12:22.000Z" title="发表于 2024-12-23 16:12:22">2024-12-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/20/12.20/" title="BGP基础"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BGP基础"/></a><div class="content"><a class="title" href="/2024/12/20/12.20/" title="BGP基础">BGP基础</a><time datetime="2024-12-20T08:12:22.000Z" title="发表于 2024-12-20 16:12:22">2024-12-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/19/12.19/" title="以太网链路聚合和DHCP"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/f2knxLCUB9yFQXr.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="以太网链路聚合和DHCP"/></a><div class="content"><a class="title" href="/2024/12/19/12.19/" title="以太网链路聚合和DHCP">以太网链路聚合和DHCP</a><time datetime="2024-12-19T08:12:22.000Z" title="发表于 2024-12-19 16:12:22">2024-12-19</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:lele0857@outlook.com" title="email"><i class="anzhiyufont anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/6378063631" title="微博"><i class="anzhiyufont anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://www.facebook.com/profile.php?id=100092208016287&amp;sk=about" title="facebook"><i class="anzhiyufont anzhiyufont anzhiyu-icon-facebook1"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2023/06/26/Wox4YqVQzy9RehX.jpg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c" title="Github"><i class="anzhiyufont anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/341232484" title="Bilibili"><i class="anzhiyufont anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://v.douyin.com/DwCpMEy/" title="抖音"><i class="anzhiyufont anzhiyufont anzhiyu-icon-tiktok"></i></a></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="樂乐" target="_blank">樂乐</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = []
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="青ICP备-0905083号">青ICP备-0905083号</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">42</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">4</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=8335997312&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/cinemas/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追剧页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/wish/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fanchuan"></use></svg><span> 心愿池</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/todo/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bijiben"></use></svg><span> 清单</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Anzhiyu%E4%B8%BB%E9%A2%98/" style="font-size: 0.88rem;">Anzhiyu主题<sup>1</sup></a><a href="/tags/ArchLinux/" style="font-size: 0.88rem;">ArchLinux<sup>1</sup></a><a href="/tags/Butterfly/" style="font-size: 0.88rem;">Butterfly<sup>1</sup></a><a href="/tags/Butterfly%E9%AD%94%E6%94%B9/" style="font-size: 0.88rem;">Butterfly魔改<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 0.88rem;">Hexo<sup>2</sup></a><a href="/tags/MathJax/" style="font-size: 0.88rem;">MathJax<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>1</sup></a><a href="/tags/eNSP/" style="font-size: 0.88rem;">eNSP<sup>20</sup></a><a href="/tags/%E5%A4%A7%E5%AD%A6/" style="font-size: 0.88rem;">大学<sup>3</sup></a><a href="/tags/%E6%97%A5%E5%B8%B8/" style="font-size: 0.88rem;">日常<sup>1</sup></a><a href="/tags/%E6%A8%82%E8%B0%B1/" style="font-size: 0.88rem;">樂谱<sup>9</sup></a><a href="/tags/%E7%A7%91%E7%9B%AE%E4%B8%89/" style="font-size: 0.88rem;">科目三<sup>1</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F/" style="font-size: 0.88rem;">系统<sup>1</sup></a><a href="/tags/%E7%BB%83%E8%BD%A6/" style="font-size: 0.88rem;">练车<sup>1</sup></a><a href="/tags/%E8%8A%82%E6%B0%94/" style="font-size: 0.88rem;">节气<sup>1</sup></a><a href="/tags/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/" style="font-size: 0.88rem;">课堂笔记<sup>1</sup></a><a href="/tags/%E9%92%A2%E7%90%B4%F0%9F%8E%B9/" style="font-size: 0.88rem;">钢琴🎹<sup>1</sup></a></div></div><hr/></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("09/08/2023 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 樂乐 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><script>(() => {
  const abcjsInit = () => {
    const abcjsFn = () => {
      document.querySelectorAll(".abc-music-sheet").forEach(ele => {
        ABCJS.renderAbc(ele, ele.innerHTML, {responsive: 'resize'})
      })
    }
    
    typeof ABCJS === 'object' ? abcjsFn()
      : getScript('https://cdn.cbd.int/abcjs@6.4.1/dist/abcjs-basic-min.js').then(abcjsFn)
  }

  window.pjax ? abcjsInit() : window.addEventListener('load', abcjsInit)
})()</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-maojin.netlify.app/.netlify/functions/twikoo',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-maojin.netlify.app/.netlify/functions/twikoo',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="前端"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-maojin.netlify.app/.netlify/functions/twikoo',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script async src="https://at.alicdn.com/t/c/font_4607084_asowc2gymd.js"></script><script type="text/javascript" src="/js/memos/project.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>